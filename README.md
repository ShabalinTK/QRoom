# Take Your Seats (TUS) — Web Application

## 1. Welcome
> *"Everything in software architecture is a trade-off. First Law of Software Architecture"*

**TUS** — это надежная и прозрачная веб-система контроля посещаемости для учебных заведений. Она решает проблему ложных отметок с помощью динамических QR-кодов и визуализирует рассадку студентов на интерактивных картах в реальном времени. 

---

## 2. Business Case

Текущие методы контроля посещаемости в ВУЗах страдают от недостоверности и временных затрат на перекличку.

**Бизнес-цели:**
* **Достоверность:** Исключение возможности регистрации студентов вне аудитории.
* **Прозрачность:** Визуальная сверка карты приложения с реальной рассадкой студентов.
* **Эффективность:** Автоматизация формирования отчетности для преподавателей.

---

## 3. System Requirements

### Stakeholders
* **SH-1: Преподаватель**: Управляет сессиями занятий, модерирует рассадку и контролирует отчетность.
* **SH-2: Студент**: Осуществляет регистрацию на занятии и отметки своего физического места.

### Functional Requirements (FR)
*Что система делает:*
* **FR-1 (Управление сессией):** Преподаватель может создать учебную сессию, выбрав аудиторию, дисциплину и группу.
* **FR-2 (Генерация QR):** Система генерирует уникальный QR-код с временным токеном, обновляющимся каждые 10 секунд.
* **FR-3 (Интерактивная карта):** Студент получает доступ к схеме аудитории только после сканирования валидного QR.
* **FR-4 (Бронирование):** Студент отмечает место через механизм «Выбор места на схеме» → «Подтверждение выбора».
* **FR-5 (Мониторинг):** Система мгновенно обновляет статус мест на карте преподавателя (свободно/занято) в реальном времени.
* **FR-6 (Модерация):** Преподаватель может принудительно освободить любое место на карте кликом.
* **FR-7 (Экспорт):** Автоматическая генерация отчета в формате `.xlsx`.

### Non-Functional Requirements (NFR)
*Как система себя ведет (измеримые показатели):*
* **NFR-1 (Security):** Срок жизни (TTL) динамического токена в QR-коде — **10 секунд**.
* **NFR-2 (Usability):** Интерфейс должен быть оптимизирован под мобильные браузеры, так как 90% студентов будут сканировать код со смартфонов.
* **NFR-3 (Availability):** Система должна быть доступна для работы в часы проведения занятий согласно расписанию вуза.

---

## 4. Constraints & Assumptions
* **CON-1**: Система доступна через браузер без установки ПО.
* **CON-2**: Предварительная интеграция планировок аудиторий в БД.
* **ASM-1**: Веб-интерфейс является основной точкой взаимодействия.
* **ASM-2**: Студенты обеспечены смартфонами с доступом в интернет.
* **ASM-3**: Аудитории оборудованы экранами для демонстрации QR-кода.

---

## 5. Target Architecture (C4 Model)

### Level 1: System Context Diagram
Диаграмма определяет границы системы и её взаимодействие с внешними акторами.

* **Person: Teacher** — Инициирует сессии, транслирует QR, выгружает отчеты.
* **Person: Student** — Сканирует QR, выбирает и подтверждает место.
* **System: TUS** — Центральное веб-приложение.
* **System: Identity Provider (IdP)** — Внешняя система авторизации.

### Level 2: Container Diagram
Диаграмма описывает внутреннюю структуру и стек технологий.

1.  **Web Application (Frontend):** Реактивное SPA на **React.js**.
2.  **API Application (Backend):** Сервер на **Node.js (FastAPI/Express)**.
3.  **Real-Time Service:** Сервис на **WebSockets** для живого обновления карт.
4.  **Relational Database:** **PostgreSQL** (хранение пользователей, карт и посещаемости).
5.  **In-Memory Store:** **Redis** для мгновенной валидации временных токенов QR-кодов.
